<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Real-Time Chat</title>
    <style>
      body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 1rem; display: flex; gap: 1rem; }
      #sidebar { width: 200px; border-right: 1px solid #ddd; padding-right: 1rem; }
      #mainContent { flex: 1; }
      #chatBox { margin-top: 1rem; }
      #log { white-space: pre-wrap; background: #f7f7f7; padding: 0.75rem; border-radius: 6px; max-height: 40vh; overflow:auto; }
      #typingStatus { font-style: italic; color: #666; font-size: 0.9rem; margin-top: 0.5rem; min-height: 1.2rem; }
      input { padding: 0.4rem; margin-right: 0.5rem; }
      button { padding: 0.45rem 0.7rem; }
      #newChatBtn { background-color: #ff6b6b; color: white; }
      .room-btn { display: block; width: 100%; text-align: left; padding: 0.5rem; margin: 0.25rem 0; background: #e9ecef; border: 1px solid #dee2e6; border-radius: 4px; cursor: pointer; }
      .room-btn:hover { background: #dee2e6; }
      .room-btn.active { background: #007bff; color: white; }
      #roomHistory { margin-top: 1rem; }
      .room-history-label { font-weight: bold; margin-bottom: 0.5rem; }
    </style>
  </head>
  <body>
    <div id="sidebar" style="display:none">
      <div class="room-history-label">Previous Chats</div>
      <div id="roomHistory"></div>
    </div>

    <div id="mainContent">
      <h3>Real-Time Chat</h3>

      <div id="joinBox">
        <input id="room" placeholder="Room name (e.g., general)" value="general" />
        <input id="name" placeholder="Your name" />
        <button id="join">Join</button>
      </div>

      <div id="switchRoomBox" style="display:none">
        <span>Logged in as: <strong id="currentName"></strong></span><br><br>
        <input id="newRoom" placeholder="Room name" value="general" />
        <button id="switchBtn">Switch Room</button>
      </div>

      <div id="chatBox" style="display:none">
        <div style="margin-bottom:0.5rem;">
          <input id="msg" placeholder="Type message" style="width:60%;" />
          <button id="send">Send</button>
          <button id="newChatBtn">Create New Chat</button>
          <button id="logoutBtn">Logout</button>
        </div>
        <pre id="log"></pre>
        <div id="typingStatus"></div>
      </div>
    </div>

    <script src="../static/script.js"></script>
  </body>
</html>
